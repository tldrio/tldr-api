<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="/embed/assets/css/widget.embed.inner.css">
  </head>

  <body>

    <div class="row">
      <div class="tldr-base-unit page-tldr-container">
        <div class="tldr-read-container">
          <span class="tldr-header">
            <span class="tldr-title">{{titlePart}}</span> <span class="provider">(via <a href="http://tldr.io" target="_blank">tldr.io</a>)</span>
          </span>

          <div class="tldr-summary">
            <ul>
              {{#tldr.summaryBullets}}
              <li class="tldr-bullet">
                <i class="square-bullet"></i> {{.}}
              </li>
              {{/tldr.summaryBullets}}
            </ul>
          </div>
          <div class="embed-actions">
            <span class="btn-group dropup">
              <a class="btn btn-link dropdown-toggle" data-toggle="dropdown">
                Embed this tl;dr
              </a>
              <ul class="pull-right dropdown-menu">
                <li class="embed-code-info">
                  Add this tl;dr to your website with the code below
                </li>
                <li>
                  <input onclick="this.select()" value='{{>website/embedCodeTldr}}' type="text" class="embed-code">
                </li>
              </ul>
            </span>
            <span class="separator"> Â· </span>
            <a href="{{websiteUrl}}/tldrs/{{tldr._id}}/{{tldr.slug}}" target="_blank" class="tldr-page-link">Permalink</a>
          </div>

        </div>

      </div>
    </div>

    <script>
      function getDocHeight() {
        var D = document;
        return Math.max(
            Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),
            Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),
            Math.max(D.body.clientHeight, D.documentElement.clientHeight)
            );
      }

// Send the height to the parent
var msg = { action: 'SET_HEIGHT'
  , tldrId: '{{tldr._id}}'
    , iframeId: '{{iframeId}}'
    , height: getDocHeight()
};
window.parent.postMessage(JSON.stringify(msg), '*');

</script>

</body>
</html>
